"use strict";var SugarCalendarAdminNotifications=window.SugarCalendarAdminNotifications||function(e){var t={$notifications:e("#sugar-calendar-notifications"),$nextButton:e("#sugar-calendar-notifications .navigation .next"),$prevButton:e("#sugar-calendar-notifications .navigation .prev"),$adminBarCounter:e("#wp-admin-bar-sugar-calendar-menu .sugar-calendar-admin-bar-menu-notification-counter")},s={init:function(){e(s.ready)},ready:function(){s.updateNavigation(),s.events()},events:function(){t.$notifications.on("click",".dismiss",s.dismiss).on("click",".next",s.navNext).on("click",".prev",s.navPrev)},dismiss:function(a){var n;0!==t.$currentMessage.length&&(n={action:"sugar_calendar_notification_dismiss",nonce:sugar_calendar_admin_notifications.nonce,id:t.$currentMessage.data("message-id")},e.post(ajaxurl,n,function(a){a.success&&(1<(a=parseInt(t.$adminBarCounter.text(),10))?t.$adminBarCounter.html("<span>"+--a+"</span>"):t.$adminBarCounter.remove(),0===(a=t.$nextMessage.length<1?t.$prevMessage:t.$nextMessage).length?t.$notifications.remove():(t.$currentMessage.remove(),a.addClass("current"),s.updateNavigation()))}))},navNext:function(a){t.$nextButton.hasClass("disabled")||(t.$currentMessage.removeClass("current"),t.$nextMessage.addClass("current"),s.updateNavigation())},navPrev:function(a){t.$prevButton.hasClass("disabled")||(t.$currentMessage.removeClass("current"),t.$prevMessage.addClass("current"),s.updateNavigation())},updateNavigation:function(){t.$currentMessage=t.$notifications.find(".sugar-calendar-notifications-message.current"),t.$nextMessage=t.$currentMessage.next(".sugar-calendar-notifications-message"),t.$prevMessage=t.$currentMessage.prev(".sugar-calendar-notifications-message"),0===t.$nextMessage.length?t.$nextButton.addClass("disabled"):t.$nextButton.removeClass("disabled"),0===t.$prevMessage.length?t.$prevButton.addClass("disabled"):t.$prevButton.removeClass("disabled")}};return s}((document,window,jQuery));SugarCalendarAdminNotifications.init();