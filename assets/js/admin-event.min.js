!function(s){"use strict";var t=window.SugarCalendar||{};t.Admin=t.Admin||{},t.Admin.Event={localizedScripts:{},init:function(){this.$clearCalendarButton=s("#sc_event_category-clear"),this.$calendarListRadios=s("#sc_event_categorychecklist input"),this.$eventSubmitButton=s("body.wp-admin.sugar-calendar #publish"),this.$eventTitle=s("body.wp-admin.sugar-calendar #title"),this.getLocalizedScripts(),this.bindEvents(),this.manipulateElements(),"object"==typeof wp.blockEditor&&this.blockEditorCustomValidation()},getLocalizedScripts:function(){this.localizedScripts="undefined"!=typeof sugar_calendar_admin_event_vars?sugar_calendar_admin_event_vars:{},void 0===this.localizedScripts?.notice_title_required&&(this.localizedScripts.notice_title_required="Event title is required")},bindEvents:function(){this.$clearCalendarButton.on("click",this.clearCalendar.bind(this)),this.$eventTitle.on("input propertychange",this.toggleActivateDefaultSubmitButton.bind(this)),this.$eventTitle.on("input propertychange",this.toggleAlertTitleEmpty.bind(this)),this.$eventSubmitButton.on("mouseenter",this.toggleAlertTitleEmpty.bind(this))},manipulateElements:function(){this.toggleActivateDefaultSubmitButton()},clearCalendar:function(t){t.preventDefault(),this.$calendarListRadios.removeAttr("checked")},toggleAlertTitleEmpty:function(){var t=""===this.$eventTitle.val();t?this.$eventSubmitButton.attr("title",this.localizedScripts.notice_title_required):this.$eventSubmitButton.removeAttr("title"),this.$eventTitle.toggleClass("sugar-calendar-field-title-empty",t)},toggleActivateDefaultSubmitButton:function(){""===this.$eventTitle.val()?this.$eventSubmitButton.attr("disabled",!0):this.$eventSubmitButton.removeAttr("disabled")},blockEditorCustomValidation:function(){let a=!1,n=!1;const o=this.localizedScripts.notice_title_required;wp.data.subscribe(()=>{let t=!1;"function"==typeof wp.data.select("core/edit-post").isPublishSidebarOpened?t=wp.data.select("core/edit-post").isPublishSidebarOpened():"object"==typeof wp.data.select("core/editor").isPublishSidebarOpened&&(t=wp.data.select("core/editor").isPublishSidebarOpened());var e=wp.data.select("core/editor").getEditedPostAttribute("title"),i=wp.data.select("core/editor").getEditedPostAttribute("status"),i=-1<s.inArray(i,["auto-draft","draft",void 0]),i=t||!i;""===e?(a||(a=!0,wp.data.dispatch("core/editor").lockPostSaving("save-lock-title")),!n&&i&&(n=!0,wp.data.dispatch("core/notices").createNotice("error",o,{id:"save-lock-title",isDismissible:!0}))):(a&&(a=!1,wp.data.dispatch("core/editor").unlockPostSaving("save-lock-title")),n&&(n=!1,wp.data.dispatch("core/notices").removeNotice("save-lock-title")))})}},t.Admin.Event.init(),window.SugarCalendar=t}(jQuery);