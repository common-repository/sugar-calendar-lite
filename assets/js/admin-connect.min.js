!function(e,t){"use strict";var n=window.SugarCalendar||{};n.Admin=n.Admin||{},n.Admin.Connect={init:function(t){this.settings=t,this.$connectBtn=e("#sugar-calendar-setting-license-key-button"),this.$connectKey=e("#sugar-calendar-setting-license-key"),this.$connectBtn.on("click",this.gotoUpgradeUrl.bind(this)),this.setConfirmDefaults()},setConfirmDefaults:function(){jconfirm.defaults={typeAnimated:!1,draggable:!1,animateFromElement:!1,boxWidth:"400px",useBootstrap:!1}},gotoUpgradeUrl:function(){this.$connectBtn.prop("disabled",!0),e.post(this.settings.ajax_url,{task:"connect_url",key:this.$connectKey.val()}).done(t=>{if(t.success)return t.data.reload?void e.alert(this.proAlreadyInstalled(t)):void(window.location.href=t.data.url);t=t.data&&t.data.message?t.data.message:this.settings.text.server_error;e.alert({title:!1,content:t,icon:this.getIcon("exclamation-circle-solid-orange.svg"),type:"orange",buttons:{confirm:{text:this.settings.text.ok,btnClass:"sugar-calendar-btn sugar-calendar-btn-lg sugar-calendar-btn-primary",keys:["enter"]}}})}).fail(t=>{this.failAlert(t)}).always(()=>{this.$connectBtn.prop("disabled",!1)})},proAlreadyInstalled:function(t){return{title:this.settings.text.almost_done,content:t.data.message,icon:this.getIcon("check-circle-solid-green.svg"),type:"green",buttons:{confirm:{text:this.settings.text.plugin_activate_btn,btnClass:"sugar-calendar-btn sugar-calendar-btn-lg sugar-calendar-btn-green",keys:["enter"],action:function(){window.location.reload()}}}}},failAlert:function(t){e.alert({title:this.settings.text.oops,content:this.settings.text.server_error+"<br>"+t.status+" "+t.statusText+" "+t.responseText,icon:this.getIcon("exclamation-circle-regular-red.svg"),type:"red",buttons:{confirm:{text:this.settings.text.ok,btnClass:"sugar-calendar-btn sugar-calendar-btn-lg sugar-calendar-btn-red",keys:["enter"]}}})},getIcon:function(t){return`"></i><img src="${this.settings.plugin_url+`assets/images/icons/${t}"`}" style="width: 46px; height: 46px;"><i class="`}},n.Admin.Connect.init(t),window.SugarCalendar=n}(jQuery,sugar_calendar_admin_connect);