window.sc_checkout_valid=!1,jQuery(document).ready(function(c){"use strict";function a(){let t=1;c(".sc-event-ticketing-attendee__input-group__attendee-label").each(function(){c(this).text("Attendee "+t),t++})}c("#sc-event-ticketing-modal").modal("handleUpdate"),c("#sc-event-ticketing-modal").on("show.bs.modal",function(){c(this);var t=c("#sc-event-ticketing-quantity").val(),e=c("#sc-event-ticketing-quantity").attr("max");if(c.ajax({type:"POST",url:sc_event_ticket_vars.ajaxurl,data:{action:"sc_et_get_price",event_id:c("input#sc_et_event_id").val(),quantity:t},dataType:"json",success:function(t){c("#sc-event-ticketing-checkout-total").html(t.data.data.price)}}),c("#sc-event-ticketing-quantity-span").text(t),1<t&&t>c(".sc-event-ticketing-attendee").length){c(".sc-event-ticketing-attendee-controls-group").find(".sc-event-ticketing-remove-attendee").removeClass("sc-event-ticketing-control-inactive"),c("#sc_et_quantity").val(t);var n,i=c(".sc-event-ticketing-attendee:first").clone();for(c(".sc-event-ticketing-attendee").not(":first").remove(),n=2;n<=e;n++)i.find("input, select, textarea").val("").each(function(){var t=c(this).attr("name"),e=c(this).attr("id");t&&(t=t.replace(/\[(\d+)\]/,"["+parseInt(n)+"]"),c(this).attr("name",t)),void 0!==e&&(e=e.replace(/(\d+)/,parseInt(n)),c(this).attr("id",e))}),i.data("key",n),i.appendTo("#sc-event-ticketing-modal-attendee-list"),i.find("input, textarea, select").eq(0).focus(),n<t&&(i=i.clone())}a()}),c("#sc-event-ticketing-modal-attendee-list").on("click",".sc-event-ticketing-add-attendee",function(){var t,n,e=c(this).parents(".sc-event-ticketing-attendee"),i=c(".sc-event-ticketing-attendee").length;c("#sc-event-ticketing-quantity").attr("max")<=i?alert(sc_event_ticket_vars.qty_limit_reached):(1===i&&c(".sc-event-ticketing-attendee-controls-group").find(".sc-event-ticketing-remove-attendee").removeClass("sc-event-ticketing-control-inactive"),t=c(".sc-event-ticketing-attendee:last").clone(),n=t.data("key"),t.attr("data-key",n+=1),t.find("input, select, textarea").val("").each(function(){var t=c(this).attr("name"),e=c(this).attr("id");t&&(t=t.replace(/\[(\d+)\]/,"["+parseInt(n)+"]"),c(this).attr("name",t)),void 0!==e&&(e=e.replace(/(\d+)/,parseInt(n)),c(this).attr("id",e))}),t.insertAfter(e).find("input, textarea, select").filter(":visible").eq(0).focus(),a(),c("#sc_et_quantity, #sc-event-ticketing-quantity").val(i+1),c("#sc-event-ticketing-quantity-span").text(i+1),c.ajax({type:"POST",url:sc_event_ticket_vars.ajaxurl,data:{action:"sc_et_get_price",event_id:c("input#sc_et_event_id").val(),quantity:c("input#sc_et_quantity").val()},dataType:"json",success:function(t){c("#sc-event-ticketing-checkout-total").html(t.data.data.price)}}))}),c("body").on("click",".sc-event-ticketing-remove-attendee",function(){var t=c(".sc-event-ticketing-attendee").length,t=(1<t?(c(this).closest(".sc-event-ticketing-attendee").remove(),2===t&&c(".sc-event-ticketing-attendee-controls-group").find(".sc-event-ticketing-remove-attendee").addClass("sc-event-ticketing-control-inactive")):c("input",".sc-event-ticketing-attendee").val(""),a(),c(".sc-event-ticketing-attendee").length);c("#sc_et_quantity, #sc-event-ticketing-quantity").val(t),c("#sc-event-ticketing-quantity-span").text(t),c.ajax({type:"POST",url:sc_event_ticket_vars.ajaxurl,data:{action:"sc_et_get_price",event_id:c("input#sc_et_event_id").val(),quantity:t},dataType:"json",success:function(t){c("#sc-event-ticketing-checkout-total").html(t.data.data.price)}})}),c("#sc-event-ticketing-copy-billing-attendee").on("click",function(t){t.preventDefault(),c('input[name="attendees[1][first_name]"]',".sc-event-ticketing-attendee").val(c("#sc-event-ticketing-first-name").val()),c('input[name="attendees[1][last_name]"]',".sc-event-ticketing-attendee").val(c("#sc-event-ticketing-last-name").val()),c('input[name="attendees[1][email]"]',".sc-event-ticketing-attendee").val(c("#sc-event-ticketing-email").val())}),c("#sc-event-ticketing-cancel").on("click",function(){c("#sc-event-ticketing-modal .spinner-border").hide()}),c("#sc-event-ticketing-purchase").on("click",function(){c("#sc-event-ticketing-checkout").first().trigger("submit")}),c("#sc-event-ticketing-checkout").on("submit",function(t){t.preventDefault();let e=c(this);c("#sc-event-ticketing-modal .spinner-border").show(),c(".sc-et-error",e).remove(),c.ajax({type:"POST",url:sc_event_ticket_vars.ajaxurl,dataType:"json",data:{action:"sc_et_validate_checkout",data:c(this).serialize()},success:function(t){t.success?(c("body").trigger("sc_et_gateway_ajax",t),setTimeout(function(){window.sc_checkout_valid&&e.get(0).submit()},4e3)):(c("#sc-event-ticketing-modal .spinner-border").hide(),c.each(t.data.errors,function(t,e){c('<div class="sc-et-error alert alert-danger" role="alert">'+e.msg+"</div>").insertAfter(e.selector)}))}}).done(function(){}).fail(function(){}).always(function(){})}),c("#sc-event-ticketing-quantity").on("change",function(){c("#sc-event-ticketing-buy-button-woocommerce").attr("href");var t=c("#sc-event-ticketing-buy-button-woocommerce").attr("href").replace(/[0-9]+(?!.*[0-9])/,c(this).val());c("#sc-event-ticketing-buy-button-woocommerce").attr("href",t)})});