jQuery(document).ready(function(o){"use strict";var m=o("input.sc-license-key"),_=o(".sc-license-verify"),f=o(".sc-license-deactivate"),u=o(".sc-license-refresh"),v=o(".sc-license-status"),h=o(".sc-settings-bubble"),p=o(".sc-license-feedback span");function a(t="activate"){var a=_.attr("data-action"),e=f.attr("disabled"),i=h.is(":hidden"),s=v.attr("class"),c=p.html(),n=m.val(),l=sc_vars.license_nonce;function r(){v.removeClass("valid invalid empty verifying"),v.addClass(s),_.attr("data-action",""),_.attr("disabled",!1),_.html(sc_vars.label_btn_default),m.attr("disabled",!1),f.attr("disabled",e),u.show(),i?h.hide():h.show(),p.html(c)}function d(){n.trim().length&&(v.removeClass("valid invalid empty"),v.addClass("verifying"),_.attr("data-action","verifying"),_.attr("disabled",!0),_.html(sc_vars.label_btn_clicked),m.attr("disabled",!0),f.attr("disabled",!0),u.hide(),p.html(sc_vars.label_feedback),o.post(sc_vars.ajax_url,{action:"sc_license_verify",license:n,nonce:l,method:t},function(t){t.length&&!0===(t=o.parseJSON(t)).success?(t=t,v.removeClass("valid invalid empty verifying"),v.addClass(t.feedback.class),_.attr("data-action",""),_.html(sc_vars.label_btn_default),m.attr("disabled",!1),m.val(t.key),"valid"===t.feedback.id?(_.attr("disabled",!0),f.attr("disabled",!1),u.show(),h.hide()):(_.attr("disabled",!1),h.show()),p.html(t.feedback.message)):r()}))}("verifying"===a?r:d)()}m.on("input",function(t){var a=v.attr("class");m.val().trim().length?(v.removeClass("valid invalid empty verifying"),v.addClass("empty"),_.attr("data-action",""),_.attr("disabled",!1),_.html(sc_vars.label_btn_default),u.hide()):(v.removeClass("valid invalid empty verifying"),v.addClass(a),_.attr("data-action",""),_.attr("disabled",!0),_.html(sc_vars.label_btn_default),f.attr("disabled",!0),u.hide(),p.html(sc_vars.feedback_empty))}),f.on("click",function(t){t.preventDefault(),a("deactivate")}),u.on("click",function(t){t.preventDefault(),a("check")}),_.on("click",function(t){t.preventDefault(),a("activate")});var t=o("ul.sc-sortable-list");0<t.length&&t.sortable({axis:"y",items:"li",cursor:"move",tolerance:"pointer",containment:"parent",distance:2,opacity:.7,scroll:!0,stop:function(){var t=o(this),a=o.map(t.children("li"),function(t){return o(t).data("key")});t.prev("input.sc-order").val(a)}}),o('input[name="sc_date_format"]').click(function(){"sc_date_format_custom_radio"!==o(this).attr("id")&&o('input[name="sc_date_format_custom"]').val(o(this).val()).closest("fieldset").find(".example").text(o(this).parent("label").children(".format-i18n").text())}),o('input[name="sc_date_format_custom"]').on("click input",function(){o("#sc_date_format_custom_radio").prop("checked",!0)}),o('input[name="sc_time_format"]').click(function(){"sc_time_format_custom_radio"!==o(this).attr("id")&&o('input[name="sc_time_format_custom"]').val(o(this).val()).closest("fieldset").find(".example").text(o(this).parent("label").children(".format-i18n").text())}),o('input[name="sc_time_format_custom"]').on("click input",function(){o("#sc_time_format_custom_radio").prop("checked",!0)}),o('input[name="sc_date_format_custom"], input[name="sc_time_format_custom"]').on("input",function(){var t=o(this),a=o.trim(t.val()),e=t.closest("fieldset"),i=e.find(".example"),s=e.find(".spinner"),e="sc_date_format_custom"===t.attr("name")?"date":"time",c="sc_"+e+"_format",t=o("#sc_"+e+"_format_custom_radio");a?(s.addClass("is-active"),t.val(a),clearTimeout(o.data(this,"timer")),o(this).data("timer",setTimeout(function(){a&&o.post(sc_vars.ajax_url,{task:c,sc_date:a},function(t){s.removeClass("is-active"),i.text(t)})},400))):(s.removeClass("is-active"),i.html("&mdash;"))}),o(".sc-settings-content .form-table a.screen-options").on("click",function(t){t.preventDefault(),o("#contextual-help-wrap").is(":hidden")&&o("#contextual-help-link").click(),o(this).hasClass("sc-date-help")?o("#tab-panel-date-formatting").trigger("click"):o(this).hasClass("sc-time-help")&&o("#tab-panel-time-formatting").trigger("click")}),o("table.sc-custom-date-table tr").on("click",function(){var t=o(this).find("code.code").text(),a=o("#sc_date_format_custom");t&&(a.val(a.val()+t),a.trigger("input"),o(this).hide().fadeIn())}),o("table.sc-custom-time-table tr").on("click",function(){var t=o(this).find("code.code").text(),a=o("#sc_time_format_custom");t&&(a.val(a.val()+t),a.trigger("input"),o(this).hide().fadeIn())})});